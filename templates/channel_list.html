<!DOCTYPE HTML>
<html lang="en" ng-app="channelcat">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <link rel="stylesheet" href="/public/js/bootstrap-3.0.0/dist/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="/public/js/bootstrap-3.0.0/dist/css/bootstrap-theme.min.css"/>
        <link rel="stylesheet" href="/public/style.css"/>
        <script src="/public/js/angular.min.js"> </script>
        <script>
        function ChannelListCtrl($scope, $http) {
            $http.get('/=/channels').success(function(data) {
                $scope.channels = data;
            });
        }
        // ChannelListCtrl.$inject = ['$scope', '$http'];


        function ChannelDetailCtrl($scope, $routeParams, $http, $location) {
            $scope.id = $routeParams.channelId;

            $http.get('/=/channel/' + $routeParams.channelId).success(function(data) {
                $scope.title = data.title;
                $scope.token = data.token;
                $scope.description = data.description;
                $scope.identity = data.identity;
            });


            $scope.updateChannel = function() {
                $http.post('/=/channel/' + $scope.id, {
                    title: $scope.title,
                    description: $scope.description,
                    identity: $scope.identity,
                    token: $scope.token
                }).success(function(data) {
                    $location.path('/channels')
                });
                // $scope..push({text:$scope.todoText, done:false});
            };
        }
        // ChannelDetailCtrl.$inject = ['$scope','$routeParams','$http', '$location'];

        angular.module('channelcat', []).
        config(['$routeProvider', function($routeProvider) {
            $routeProvider.
                when('/channels', {templateUrl: '/partials/channel-list.html',   controller: ChannelListCtrl}).
                when('/channels/:channelId', {templateUrl: '/partials/channel-detail.html', controller: ChannelDetailCtrl}).
                otherwise({redirectTo: '/channels'});
        }]);

        </script>
    </head>
    <body>
        <div ng-view></div>
    </body>
</html>
